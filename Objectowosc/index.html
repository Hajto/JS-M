<!DOCTYPE HTML>
<html>
<head>
    <title>Buka</title>
    <script>
        var canvas;
        var c;
        var img;
        var imgSize = 32;
        var tab = [];
        var obrazki = [];

        function init() {
            for(var i = 0; i< 3; i++){
                obrazki[i] = new Image();
                obrazki[i].src = "cross"+i+".png";
            }
            canvas = document.getElementById('canvas');
            c = canvas.getContext('2d');
            setInterval(function () {
                tab.push(new __dollar(
                        Math.round(Math.random()*canvas.width),
                        Math.round(Math.random()*canvas.height),
                        Math.round(Math.random()*3)+1,
                        obrazki[Math.round(Math.random()*2)],
                        Math.round(Math.random()*3)+1
                ));
            }, 500);
            setInterval(function(){
                canvas.width = canvas.width;
                for(var i = 0; i < tab.length; i++){
                    tab[i].move();
                }
            },10);
        }

        function __dollar(x, y, kierunek, img,speed) {
            this.img = img;
            this.x = x;
            this.y = y;
            this.speed = speed;
            this.kierunek = kierunek;
            this.draw = function () {
                c.drawImage(this.img, this.x, this.y);
            };
            this.onload = function () {
              this.draw();
            };
            this.move = function () {
                switch (kierunek) {
                    case 1:
                        this.x += 1*this.speed;
                        this.y += 1*this.speed;
                        break;
                    case 2:
                        this.x -= 1*this.speed;
                        this.y -= 1*this.speed;
                        break;
                    case 3:
                        this.x -= 1*this.speed;
                        this.y += 1*this.speed;
                        break;
                    case 4:
                        this.x += 1*this.speed;
                        this.y -= 1*this.speed;
                        break;
                }
                this.draw();
                if (this.y + imgSize > canvas.height)
                    kierunek = 4;
                else if (this.y < 0)
                    kierunek = 3;
                else if (this.x + imgSize > canvas.width)
                    kierunek = 2;
                else if (this.x < 0)
                    kierunek = 1;
            };

        }

    </script>
</head>
<body onload="init();">
<canvas id="canvas" width="400" height="400" style="border: #000000 solid;"></canvas>
</body>
</html>